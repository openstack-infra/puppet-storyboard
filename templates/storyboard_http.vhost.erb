<VirtualHost <%= scope.lookupvar("storyboard::application::hostname") %>:80>
<% if scope.lookupvar("storyboard::application::serveradmin") %>
  ServerAdmin <%= scope.lookupvar("storyboard::application::serveradmin") %>
<% end %>
  ServerName <%= scope.lookupvar("storyboard::application::hostname") %>

  DocumentRoot <%= scope.lookupvar("storyboard::application::www_root") %>

  WSGIDaemonProcess storyboard user=<%= scope.lookupvar("storyboard::params::user") %> group=<%= scope.lookupvar("storyboard::params::group") %> threads=5 python-path=/usr/local/lib/python2.7/dist-packages
  WSGIScriptAlias /api /var/lib/storyboard/storyboard.wsgi
  WSGIPassAuthorization On

  LogLevel warn
  ErrorLog ${APACHE_LOG_DIR}/storyboard-error.log
  CustomLog ${APACHE_LOG_DIR}/storyboard-access.log combined

  <Directory "<%= scope.lookupvar("storyboard::application::install_root") %>">
    Order allow,deny
    Allow from all
    # New directive needed in Apache 2.4.3:
    Require all granted
  </Directory>
</VirtualHost>