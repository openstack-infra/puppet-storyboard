<VirtualHost <%= @hostname %>:80>
<% if !!@server_admin %>
  ServerAdmin <%= @server_admin %>
<% end %>
  ServerName <%= @hostname %>

  DocumentRoot <%= @install_root_webclient %>

  WSGIDaemonProcess storyboard user=<%= @user %> group=<%= @group %> threads=5 python-path=/usr/local/lib/python2.7/dist-packages
  WSGIScriptAlias /api /var/lib/storyboard/storyboard.wsgi
  WSGIPassAuthorization On

  LogLevel warn
  ErrorLog ${APACHE_LOG_DIR}/storyboard-error.log
  CustomLog ${APACHE_LOG_DIR}/storyboard-access.log combined

  <Directory "<%= @install_root_api %>">
    <% if @new_vhost_perms %>
      Require all granted
    <% else %>
      Order allow,deny
      Allow from all
    <% end %>
  </Directory>
</VirtualHost>
